Version 4
SHEET 1 1372 680
WIRE 384 -512 144 -512
WIRE 144 -496 144 -512
WIRE 0 -400 -208 -400
WIRE 144 -400 144 -416
WIRE 144 -400 64 -400
WIRE 144 -384 144 -400
WIRE 144 -288 144 -304
WIRE -208 -176 -208 -400
WIRE 0 -176 -208 -176
WIRE 384 -176 384 -512
WIRE 384 -176 80 -176
WIRE -496 -96 -496 -112
WIRE -368 -96 -368 -112
WIRE -496 -64 -496 -96
WIRE -368 -64 -368 -96
WIRE 176 -48 -32 -48
WIRE 320 -48 240 -48
WIRE 752 0 736 0
WIRE 880 0 832 0
WIRE -496 32 -496 16
WIRE -368 32 -368 16
WIRE 208 64 208 48
WIRE 800 80 800 64
WIRE 208 112 208 64
WIRE -384 128 -496 128
WIRE -272 128 -384 128
WIRE -208 128 -208 -176
WIRE -208 128 -272 128
WIRE -176 128 -208 128
WIRE -32 128 -32 -48
WIRE -32 128 -96 128
WIRE 32 128 -32 128
WIRE 176 128 112 128
WIRE 800 128 800 80
WIRE 320 144 320 -48
WIRE 320 144 240 144
WIRE 384 144 384 -176
WIRE 384 144 320 144
WIRE 480 144 384 144
WIRE 592 144 480 144
WIRE 736 144 736 0
WIRE 736 144 672 144
WIRE 768 144 736 144
WIRE -496 160 -496 128
WIRE -384 160 -384 128
WIRE -272 160 -272 128
WIRE 176 160 144 160
WIRE 880 160 880 0
WIRE 880 160 832 160
WIRE 1024 160 880 160
WIRE 768 176 736 176
WIRE 144 192 144 160
WIRE 736 208 736 176
WIRE 208 224 208 176
WIRE 208 240 208 224
WIRE 800 240 800 192
WIRE 800 256 800 240
WIRE -496 272 -496 240
WIRE -384 272 -384 224
WIRE -384 272 -496 272
WIRE -272 272 -272 240
WIRE -272 272 -384 272
WIRE -496 304 -496 272
FLAG -496 32 0
FLAG -368 32 0
FLAG -496 -96 V+
FLAG -368 -96 V-
FLAG 208 64 V+
FLAG 208 224 V-
FLAG 144 192 0
FLAG -496 304 0
FLAG 480 144 VOUT_TIA
FLAG 800 80 V+
FLAG 800 240 V-
FLAG 736 208 0
FLAG 1024 160 VOUT_CHAIN
FLAG 144 -288 0
SYMBOL voltage -496 -80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5V
SYMBOL voltage -368 -80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value -5V
SYMBOL cap -400 160 R0
SYMATTR InstName C_PD
SYMATTR Value 140p
SYMBOL res -512 144 R0
SYMATTR InstName R_PD
SYMATTR Value 5G
SYMBOL res 96 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RF_STG1
SYMATTR Value {R_TIA}
SYMBOL current -272 160 R0
WINDOW 123 24 108 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 0 0
SYMATTR InstName I_PD
SYMATTR Value 0
SYMBOL cap 64 -416 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName CF_STG1
SYMATTR Value {C_TIA}
SYMBOL Opamps\\LT1115 -240 384 R0
SYMATTR InstName U2
SYMBOL Opamps\\LT1792 80 384 R0
SYMATTR InstName U3
SYMBOL Opamps\\LT1793 -80 384 R0
SYMATTR InstName U1
SYMBOL Opamps\\LT1169 208 80 R0
SYMATTR InstName U4
SYMBOL res 688 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res 848 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL Opamps\\LT1792 800 96 R0
SYMATTR InstName U5
SYMBOL res -80 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1
SYMBOL cap 240 -64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 0.1f
SYMBOL res 128 -400 R0
SYMATTR InstName R4
SYMATTR Value {TRIM_POS*500k}
SYMBOL res 128 -512 R0
SYMATTR InstName R5
SYMATTR Value {(1-TRIM_POS)*500k}
SYMBOL voltage 16 128 R270
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 24 -12 Left 2
SYMATTR Value2 AC 1 0
SYMATTR InstName VNI
SYMATTR Value 0
TEXT -816 -32 Left 2 !.param R_TIA = 100G
TEXT -800 -248 Left 2 !.ac dec 100 1 10Meg
TEXT 744 -408 Left 2 ;Target Design:\nGain  10^12 V/A (240dB)\n-3dB BW = 20Hz\nInput-Ref Spot Noise = 0.42 fA/sqrt(Hz)\nInput-Ref Integrated Noise = \nOutput-Ref Spot Noise = 1.1mV/sqrt(Hz)\nOutput-Ref Integrated Noise = 6mVrms
TEXT -800 -216 Left 2 !;noise V(VOUT_CHAIN) I_PD dec 100 1m 1G
TEXT 744 -192 Left 2 ;Simulate, then click on VOUT_TIA to plot the noise PSD\nCtrl+Click on "V(onoise)" to get the integrated noise
TEXT -816 0 Left 2 !.param C_TIA = 100f
TEXT 456 320 Left 2 ;For post-amp, we need minimum *voltage* noise\nbecause source impedance is low
TEXT -88 -592 Left 2 ;If we put a compensation cap here it needs\nto be air-gapped to get low enough leakage current
TEXT -312 -512 Left 2 !.param TRIM_POS=0.1
